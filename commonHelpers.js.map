{"version":3,"file":"commonHelpers.js","sources":["../src/js/fetchData.js","../src/js/createCategoryList.js","../src/js/createButton.js","../src/js/createElementMarkup.js","../src/js/renderContent.js","../src/js/createParentElementMarkup.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://books-backend.p.goit.global/books';\n\nexport async function fetchData(endPoint, selectedCategory = '') {\n  try {\n    const url = endPoint + selectedCategory;\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return null;\n  }\n}\n","export function createCategoryList(data) {\n  return Array.from(data, item => `<li class=\"sidebar-category-list-item\">${item.list_name}</li>`).join('');\n}\n","export function createButton(\n  className,\n  textContent,\n  datasetCategory = '',\n  datasetAction = '',\n  datasetID = ''\n) {\n  return `<button type=\"button\" class=\"${className}\" data-category = \"${datasetCategory}\" data-action = \"${datasetAction}\" data-id = \"${datasetID}\">${textContent}</button>`;\n}\n","export function createBookMarkup(data) {\n  // depending on e.target.dataset.id markup will differ //\n  // it may be element from shopping list or the one from category on the main //\n  // it may be a list of categories fetched from backend //\n  return `<li class=\"card-book\" data-id=\"${data._id}\">\n  <a class=\"book-link\" href=\"${data.book_image}\" data-id=\"${data._id}\"></a>\n    <img class=\"book-image\" src=\"${data.book_image}\"\n      alt=\"${data.title}\"\n      width=\"${data.book_image_width}\"\n      height=\"${data.book_image_height}\" data-id=\"${data._id}\">\n<div class=\"book-content\" data-id=\"${data._id}\">\n  <h3 class=\"book-title\" data-id=\"${data._id}\">${data.title}</h3>\n  <p class=\"book-author\" data-id=\"${data._id}\">${data.author}</p>\n</div>\n</li>`;\n}\n","export function renderContent(parentElement, markup) {\n  parentElement.innerHTML = markup;\n}\n","export function createCategoryMarkup(data, bookMarkupFn) {\n  const innerMarkup = data.map(x => bookMarkupFn(x)).join('');\n  const categoryMarkup = `<ul class=\"category-list\">${innerMarkup}</ul>`;\n  return categoryMarkup;\n}\n","import { fetchData } from './js/fetchData';\nimport { createCategoryList } from './js/createCategoryList';\nimport { createButton } from './js/createButton';\nimport { createBookMarkup } from './js/createElementMarkup';\nimport { renderContent } from './js/renderContent';\nimport { createCategoryMarkup } from './js/createParentElementMarkup';\n\nconst refs = {\n  mainTitle: document.querySelector('.main-title'),\n  mainCatWrap: document.querySelector('.category-list-wrapper'),\n  sidebarCatList: null,\n  catList: document.querySelector('.sidebar-category-list'),\n  seeMoreButtons: null,\n};\n\nconst endPoints = {\n  list: '/category-list',\n  topbooks: '/top-books',\n  category: '/category?category=',\n  id: '/{id}',\n};\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  refs.mainTitle.textContent = 'Best Sellers Books';\n\n  try {\n    const topBookData = await fetchData(endPoints.topbooks);\n    const topBooksMarkup = topBookData\n      .map(x => {\n        const title = `<h2 class=\"category-title\">${x.list_name}</h2>`;\n        const catMarkup = createCategoryMarkup(x.books, createBookMarkup);\n        const button = createButton('see-more-button', 'See more', x.list_name);\n        return title + catMarkup + button;\n      })\n      .join('');\n    renderContent(refs.mainCatWrap, topBooksMarkup);\n  } catch (error) {\n    console.log('Error getting top sellers book data:', error);\n  }\n\n  try {\n    const catListData = await fetchData(endPoints.list);\n    const catListMarkup = createCategoryList(catListData);\n    renderContent(refs.catList, catListMarkup);\n  } catch (error) {\n    console.log('Error getting sidebar category list:', error);\n  }\n\n  refs.catList.addEventListener('click', async e => {\n    if (e.target === e.currentTarget) return;\n    refs.mainTitle.textContent = e.target.textContent;\n\n    try {\n      const selectedCatData = await fetchData(\n        endPoints.category,\n        e.target.textContent\n      );\n      const selectedCatMarkup = createCategoryMarkup(\n        selectedCatData,\n        createBookMarkup\n      );\n      renderContent(refs.mainCatWrap, selectedCatMarkup);\n    } catch (error) {\n      console.log('Error getting selected category data:', error);\n    }\n  });\n\n  refs.seeMoreButtons = document.querySelectorAll('.see-more-button');\n  refs.seeMoreButtons.forEach(x =>\n    x.addEventListener('click', async e => {\n      if (!e.target.dataset.category) return;\n      refs.mainTitle.textContent = e.target.dataset.category;\n      try {\n        const selectedCatData = await fetchData(\n          endPoints.category,\n          e.target.dataset.category\n        );\n        const selectedCatMarkup = createCategoryMarkup(\n          selectedCatData,\n          createBookMarkup\n        );\n        renderContent(refs.mainCatWrap, selectedCatMarkup);\n      } catch (error) {\n        console.log('Error getting selected category data:', error);\n      }\n    })\n  );\n\n  refs.sidebarCatList = document.querySelectorAll('.category-list');\n  refs.sidebarCatList.forEach(x => {\n    x.addEventListener('click', async e => {\n      if (e.target === e.currentTarget) return;\n      // openModal(e.target.dataset.id);\n    });\n  });\n});\n"],"names":["axios","fetchData","endPoint","selectedCategory","url","error","createCategoryList","data","item","createButton","className","textContent","datasetCategory","datasetAction","datasetID","createBookMarkup","renderContent","parentElement","markup","createCategoryMarkup","bookMarkupFn","x","refs","endPoints","topBooksMarkup","title","catMarkup","button","catListData","catListMarkup","e","selectedCatData","selectedCatMarkup"],"mappings":"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"}