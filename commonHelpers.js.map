{"version":3,"file":"commonHelpers.js","sources":["../src/js/enableDarkTheme.js","../src/js/heder.js","../src/js/autorization.js","../src/js/fetchData.js","../src/js/createCategoryList.js","../src/js/createButton.js","../src/js/createElementMarkup.js","../src/js/renderContent.js","../src/js/createParentElementMarkup.js","../src/main.js"],"sourcesContent":["\n\nlet hederContainer = document.querySelector('.header-container');\nlet toggler = document.querySelector('#themeToggle');\n\ntoggler.addEventListener('click', toggleDarkTheme);\n\nfunction toggleDarkTheme(){\n    let classList = hederContainer.classList;\n    toggler.checked ? classList.add('dark-theme') : classList.remove('dark-theme');\n}\n\n\n","const btnHome = document.querySelector('.home-js');\nconst btnShopping = document.querySelector('.shopping-js');\nconst signupBtn = document.querySelector('.signup-js');\nconst userProfile = document.querySelector('.js-user-profile');\nconst userNameElem = document.querySelector('.js-user-name');\n\nexport function showHeaderNav(){\n    btnHome.classList.remove('hidden');\n    btnShopping.classList.remove('hidden');\n    userProfile.classList.remove('hidden');\n    signupBtn.classList.add('hidden');\n}\n\nexport function hideHeaderNav(){\n    btnHome.classList.add('hidden');\n    btnShopping.classList.add('hidden');\n    userProfile.classList.add('hidden');\n    signupBtn.classList.remove('hidden');\n}\n\nif (localStorage.getItem('userInfo')){\n    showHeaderNav();\nconst user = JSON.parse(localStorage.getItem('userInfo'));\nuserNameElem.textContent = user.displayName;\n}","import * as basicLightbox from 'basiclightbox';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, createUserWithEmailAndPassword, updateProfile, signInWithEmailAndPassword} from 'firebase/auth';\nimport {showHeaderNav, hideHeaderNav} from './heder';\n\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyCAn6DCGGRmtf9e6SAGV9R6e1JxRK2q4A8',\n  authDomain: 'digitall-project10.firebaseapp.com',\n  projectId: 'digitall-project10',\n  storageBucket: 'digitall-project10.appspot.com',\n  messagingSenderId: '618447253868',\n  appId: '1:618447253868:web:8e9934944d76f91f920349',\n};\n\nconst btnLogout =  document.querySelector('.js-user-profile');\nconst userNameElem = document.querySelector('.js-user-name');\nconst button = document.querySelector('.signup-js');\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth();\n\n\nbutton.addEventListener('click', onButtonClick);\n\nfunction onButtonClick() {\n  instanceSignUp.show();\n  //instanceSignIn.show();\n}\n\nconst instanceSignUp = basicLightbox.create(\n  `\n<div class=\"authorization\">\n<form class=\"autorization-form\">\n  <input type=\"text\" name=\"name\" required>\n  <input type=\"email\" name=\"email\" required>\n  <input type=\"password\" name=\"password\" required minlength=\"6\" >\n  <button class=\"form-button\" >Sign up\n\n  </button>\n</form>\n<button class=\"sign-up-btn\">Sign Up</button>\n<button class=\"sign-in-btn js-signin-btn\">Sign in</button>\n</div>\n`,\n  {\n    onShow: instance => {\n      instance.element().querySelector('form').addEventListener('submit', onFormSubmit)\n      instance.element().querySelector('.js-signin-btn').addEventListener('click', instanceSignIn.show)\n      instanceSignIn.close();\n    },\n  }\n);\n\nconst instanceSignIn = basicLightbox.create(\n    `\n  <div class=\"authorization\">\n  <form class=\"autorization-form\">\n    \n    <input type=\"email\" name=\"email\" required>\n    <input type=\"password\" name=\"password\" required minlength=\"6\" >\n    <button class=\"form-button js-signup-btn\">Sign in\n    </button>\n  </form>\n  <button class=\"js-btn-signup\">Sign Up</button>\n  </div>\n  `,\n    {\n      onShow: instance => {\n        instance.element().querySelector('form').addEventListener('submit', onSignIn)\n        instance.element().querySelector('.js-btn-signup').addEventListener('click', instanceSignUp.show)\n        instanceSignUp.close();\n      },\n    }\n  );\n\nfunction onSignIn(e){\n    e.preventDefault();\n    let email = e.target.elements.email.value;\n    let password = e.target.elements.password.value;\n\n    signIn(email, password);\n    e.target.reset();\n}\n\n\n\nfunction signUp(email, password, name) {\n  createUserWithEmailAndPassword(auth, email, password)\n    .then(userCredential => {\n      // Signed up\n      const user = userCredential.user;\n      updateProfile(user, {displayName: name});\n      showHeaderNav();\n      instanceSignUp.close();\n    })\n    .catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      console.log(error);\n    });\n}\n\nfunction signIn(email, password) {\n\nsignInWithEmailAndPassword(auth, email, password)\n  .then((userCredential) => {\n    // Signed in \n    const user = userCredential.user;\n    userNameElem.textContent = user.displayName;\n    showHeaderNav();\n    instanceSignIn.close();\n    localStorage.setItem('userInfo', JSON.stringify(user));\n  })\n  .catch((error) => {\n    const errorCode = error.code;\n    const errorMessage = error.message;\n  });\n  }\n\nfunction onFormSubmit(e){\n    e.preventDefault();\n    let email = e.target.elements.email.value;\n    let name = e.target.elements.name.value;\n    let password = e.target.elements.password.value;\n\n    signUp(email, password, name);\n    e.target.reset();\n    userNameElem.textContent = name;\n}\n\n// ------LOG OUT----------//\nfunction logout(){\n    hideHeaderNav();\n\n    if (location.pathname.includes('shopping-list')){\n        location.pathname = '/';\n    }\nlocalStorage.removeItem('userInfo');\n}\n\nbtnLogout.addEventListener('click', logout);\n\n\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://books-backend.p.goit.global/books';\n\nexport async function fetchData(endPoint, selectedCategory = '') {\n  try {\n    const url = endPoint + selectedCategory;\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    return null;\n  }\n}\n\n","export function createCategoryList(data) {\n  return Array.from(data, item => `<li class=\"sidebar-category-list-item\">${item.list_name}</li>`).join('');\n}\n","export function createButton(\n  className,\n  textContent,\n  datasetCategory = '',\n  datasetAction = '',\n  datasetID = ''\n) {\n  return `<button type=\"button\" class=\"${className}\" data-category = \"${datasetCategory}\" data-action = \"${datasetAction}\" data-id = \"${datasetID}\">${textContent}</button>`;\n}\n","export function createBookMarkup(data) {\n  // depending on e.target.dataset.id markup will differ //\n  // it may be element from shopping list or the one from category on the main //\n  // it may be a list of categories fetched from backend //\n  return `<li class=\"card-book\" data-id=\"${data._id}\">\n  <a class=\"book-link\" href=\"${data.book_image}\" data-id=\"${data._id}\"></a>\n    <img class=\"book-image\" src=\"${data.book_image}\"\n      alt=\"${data.title}\"\n      width=\"${data.book_image_width}\"\n      height=\"${data.book_image_height}\" data-id=\"${data._id}\">\n<div class=\"book-content\" data-id=\"${data._id}\">\n  <h3 class=\"book-title\" data-id=\"${data._id}\">${data.title}</h3>\n  <p class=\"book-author\" data-id=\"${data._id}\">${data.author}</p>\n</div>\n</li>`;\n}\n","export function renderContent(parentElement, markup) {\n  parentElement.innerHTML = markup;\n}\n","export function createCategoryMarkup(data, bookMarkupFn) {\n  const innerMarkup = data.map(x => bookMarkupFn(x)).join('');\n  const categoryMarkup = `<ul class=\"category-list\">${innerMarkup}</ul>`;\n  return categoryMarkup;\n}\n","import './js/enableDarkTheme';\nimport './js/autorization';\nimport { fetchData } from './js/fetchData';\nimport { createCategoryList } from './js/createCategoryList';\nimport { createButton } from './js/createButton';\nimport { createBookMarkup } from './js/createElementMarkup';\nimport { renderContent } from './js/renderContent';\nimport { createCategoryMarkup } from './js/createParentElementMarkup';\n\nconst refs = {\n  mainTitle: document.querySelector('.main-title'),\n  mainCatWrap: document.querySelector('.category-list-wrapper'),\n  sidebarCatList: null,\n  catList: document.querySelector('.sidebar-category-list'),\n  seeMoreButtons: null,\n};\n\nconst endPoints = {\n  list: '/category-list',\n  topbooks: '/top-books',\n  category: '/category?category=',\n  id: '/{id}',\n};\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  refs.mainTitle.textContent = 'Best Sellers Books';\n\n  try {\n    const topBookData = await fetchData(endPoints.topbooks);\n    const topBooksMarkup = topBookData\n      .map(x => {\n        const title = `<h2 class=\"category-title\">${x.list_name}</h2>`;\n        const catMarkup = createCategoryMarkup(x.books, createBookMarkup);\n        const button = createButton('see-more-button', 'See more', x.list_name);\n        return title + catMarkup + button;\n      })\n      .join('');\n    renderContent(refs.mainCatWrap, topBooksMarkup);\n  } catch (error) {\n    console.log('Error getting top sellers book data:', error);\n  }\n\n  try {\n    const catListData = await fetchData(endPoints.list);\n    const catListMarkup = createCategoryList(catListData);\n    renderContent(refs.catList, catListMarkup);\n  } catch (error) {\n    console.log('Error getting sidebar category list:', error);\n  }\n\n  refs.catList.addEventListener('click', async e => {\n    if (e.target === e.currentTarget) return;\n    refs.mainTitle.textContent = e.target.textContent;\n\n    try {\n      const selectedCatData = await fetchData(\n        endPoints.category,\n        e.target.textContent\n      );\n      const selectedCatMarkup = createCategoryMarkup(\n        selectedCatData,\n        createBookMarkup\n      );\n      renderContent(refs.mainCatWrap, selectedCatMarkup);\n    } catch (error) {\n      console.log('Error getting selected category data:', error);\n    }\n  });\n\n  refs.seeMoreButtons = document.querySelectorAll('.see-more-button');\n  refs.seeMoreButtons.forEach(x =>\n    x.addEventListener('click', async e => {\n      if (!e.target.dataset.category) return;\n      refs.mainTitle.textContent = e.target.dataset.category;\n      try {\n        const selectedCatData = await fetchData(\n          endPoints.category,\n          e.target.dataset.category\n        );\n        const selectedCatMarkup = createCategoryMarkup(\n          selectedCatData,\n          createBookMarkup\n        );\n        renderContent(refs.mainCatWrap, selectedCatMarkup);\n      } catch (error) {\n        console.log('Error getting selected category data:', error);\n      }\n    })\n  );\n\n  refs.sidebarCatList = document.querySelectorAll('.category-list');\n  refs.sidebarCatList.forEach(x => {\n    x.addEventListener('click', async e => {\n      if (e.target === e.currentTarget) return;\n      // openModal(e.target.dataset.id);\n    });\n  });\n});\n"],"names":["hederContainer","toggler","toggleDarkTheme","classList","btnHome","btnShopping","signupBtn","userProfile","userNameElem","showHeaderNav","hideHeaderNav","user","firebaseConfig","btnLogout","button","initializeApp","auth","getAuth","onButtonClick","instanceSignUp","basicLightbox.create","instance","onFormSubmit","instanceSignIn","onSignIn","email","password","signIn","signUp","name","createUserWithEmailAndPassword","userCredential","updateProfile","error","signInWithEmailAndPassword","logout","axios","fetchData","endPoint","selectedCategory","url","createCategoryList","data","item","createButton","className","textContent","datasetCategory","datasetAction","datasetID","createBookMarkup","renderContent","parentElement","markup","createCategoryMarkup","bookMarkupFn","x","refs","endPoints","topBooksMarkup","title","catMarkup","catListData","catListMarkup","selectedCatData","selectedCatMarkup","e"],"mappings":"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"}