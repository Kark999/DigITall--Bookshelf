{"version":3,"file":"commonHelpers.js","sources":["../src/js/createTopSellers.js","../src/js/createCategoryList.js","../src/js/showHideFn.js","../src/main.js"],"sourcesContent":["import {\n  createCategoryMarkup,\n  createBookMarkup,\n  createButton,\n  renderContent,\n} from './createMarkups';\nimport { fetchData, endPoints } from './fetchData';\nimport { createAndOpenModalWindow } from './modal';\nimport { refs } from './refs';\n\nfunction createTopSellers(data) {\n  return data\n    .map(x => {\n      const strArr = x.list_name.split(' ');\n      strArr[strArr.length - 1] = `<span>${strArr[strArr.length - 1]}</span>`;\n      const title = `<h2 class=\"category-title\">${strArr.join(' ')}</h2>`;\n      const catMarkup = createCategoryMarkup(x.books, createBookMarkup);\n      const button = createButton('see-more-button', 'See more', x.list_name);\n      return title + catMarkup + button;\n    })\n    .join('');\n}\n\nexport async function renderTopSellers() {\n  const topBookData = await fetchData(endPoints.topbooks);\n  const topBooksMarkup = createTopSellers(topBookData);\n  renderContent(refs.mainCatWrap, topBooksMarkup, createAndOpenModalWindow);\n}\n","import { refs } from './refs';\nimport { fetchData } from './fetchData';\nimport { endPoints } from './fetchData';\nimport { createAndOpenModalWindow } from './modal';\nimport {\n  createCategoryMarkup,\n  createBookMarkup,\n  renderContent,\n} from './createMarkups';\nimport { renderTopSellers } from './createTopSellers';\n\ncatList();\n\nrefs.catList.addEventListener('click', onCatClick);\n\nasync function catList() {\n  const catListData = await fetchData(endPoints.list);\n  const catListMarkup = createCategoryList(catListData);\n  renderContent(refs.catList, catListMarkup);\n}\n\nfunction createCategoryList(data) {\n  const titleMarkup = `<li class=\"sidebar-category-item\"><p class=\"sidebar-category-text make-blue\">All categories</p></li>`;\n  const itemsMarkup = data\n    .map(\n      item =>\n        `<li class=\"sidebar-category-item\" data-category=\"${item.list_name}\"><p class=\"sidebar-category-text\" data-category=\"${item.list_name}\">${item.list_name}</p></li>`\n    )\n    .join('');\n  const mainMarkup = titleMarkup + itemsMarkup;\n  return mainMarkup;\n}\n\nfunction linkIsActive(e) {\n  if (e.target.nodeName === 'LI') {\n    const arrayElem = e.target.parentElement.querySelectorAll(\n      '.sidebar-category-text'\n    );\n    arrayElem.forEach(item => {\n      item.classList.remove('make-blue');\n    });\n    e.target.firstElementChild.classList.add('make-blue');\n  } else if (e.target.nodeName === 'P') {\n    const arrayElem = e.target.parentElement.parentElement.querySelectorAll(\n      '.sidebar-category-text'\n    );\n    arrayElem.forEach(item => {\n      item.classList.remove('make-blue');\n    });\n    e.target.classList.add('make-blue');\n  }\n}\n\nasync function onCatClick(e) {\n  if (e.target === e.currentTarget) return;\n  if (!e.target.dataset.category) {\n    linkIsActive(e);\n    renderTopSellers();\n    return;\n  }\n  linkIsActive(e);\n  const strArr = e.target.dataset.category.split(' ');\n  strArr[strArr.length - 1] = `<span>${strArr[strArr.length - 1]}</span>`;\n  refs.mainTitle.innerHTML = strArr.join(' ');\n\n  const selectedCatData = await fetchData(\n    endPoints.category,\n    e.target.dataset.category\n  );\n  const selectedCatMarkup = createCategoryMarkup(\n    selectedCatData,\n    createBookMarkup\n  );\n  renderContent(refs.mainCatWrap, selectedCatMarkup, createAndOpenModalWindow);\n  const catBooks = document.querySelectorAll('.main-category-item');\n  catBooks.forEach(x => showElement(x));\n}\n","export function showElement(elem) {\n  elem.classList.add('visible');\n  elem.classList.remove('hidden');\n}\n\nexport function hideElement(elem) {\n  elem.classList.remove('visible');\n  elem.classList.add('hidden');\n}\n","import './js/enableDarkTheme';\nimport './js/autorization';\nimport './js/donation-list';\nimport './js/createCategoryList';\nimport { fetchData, endPoints } from './js/fetchData';\nimport {\n  createBookMarkup,\n  createCategoryMarkup,\n  renderContent,\n} from './js/createMarkups';\nimport { createAndOpenModalWindow } from './js/modal';\nimport { renderTopSellers } from './js/createTopSellers';\nimport { showElement, hideElement } from './js/showHideFn';\nimport { refs } from './js/refs';\n\nrenderTopSellers();\nrefs.mainCatWrap.addEventListener('click', onMoreButtonClick);\n\nasync function onMoreButtonClick(e) {\n  if (!e.target.dataset.category) return;\n\n  const strArr = e.target.dataset.category.split(' ');\n  strArr[strArr.length - 1] = `<span>${strArr[strArr.length - 1]}</span>`;\n  refs.mainTitle.innerHTML = strArr.join(' ');\n\n  const selectedCatData = await fetchData(\n    endPoints.category,\n    e.target.dataset.category\n  );\n\n  const selectedCatMarkup = createCategoryMarkup(\n    selectedCatData,\n    createBookMarkup\n  );\n\n  renderContent(refs.mainCatWrap, selectedCatMarkup, createAndOpenModalWindow);\n  const catBooks = document.querySelectorAll('.main-category-item');\n  catBooks.forEach(x => showElement(x));\n}\n"],"names":["createTopSellers","data","x","strArr","title","catMarkup","createCategoryMarkup","createBookMarkup","button","createButton","renderTopSellers","topBookData","fetchData","endPoints","topBooksMarkup","renderContent","refs","createAndOpenModalWindow","catList","onCatClick","catListData","catListMarkup","createCategoryList","titleMarkup","itemsMarkup","item","linkIsActive","e","selectedCatData","selectedCatMarkup","showElement","elem","onMoreButtonClick"],"mappings":"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"}