{"version":3,"file":"commonHelpers2.js","sources":["../src/js/workInLS.js","../src/img/png/cart-background.png","../src/js/cartPagination.js","../src/js/shoppingListHandler.js","../src/shopping-list.js"],"sourcesContent":["const prefixKey = ''; // Prefix is needed to make your keys unique in LS,  as another library may have the same key\n\nexport const getLS = key => {\n  try {\n    const lsValue = localStorage.getItem(\n      `${prefixKey ? `${prefixKey}_` : ''}${key}`\n    );\n    if (lsValue) {\n      return JSON.parse(lsValue);\n    }\n    throw new Error(`I do not find ${prefixKey ? `${prefixKey}_` : ''}${key}`);\n  } catch (error) {\n    console.warn('[getLS]: ', error);\n    return null;\n  }\n};\n\n// const cart = getLS(\"cart\");\n\nexport const setLS = (key, value) => {\n  try {\n    value === null\n      ? localStorage.removeItem(`${prefixKey ? `${prefixKey}_` : ''}${key}`)\n      : localStorage.setItem(\n          `${prefixKey ? `${prefixKey}_` : ''}${key}`,\n          JSON.stringify(value)\n        );\n  } catch (error) {\n    console.warn('[setLS]: ', error);\n    return null;\n  }\n};\n\n// ===== end work in localeStorage ===== //\n","export default \"__VITE_ASSET__8169f96b__\"","import { getLS } from './workInLS';\n\nconst store = {\n  offset: 0,\n  count: 3,\n};\n\nexport const getActualCards = () => {\n  const cards = getLS('cart') || [];\n  if (!cards?.length) return [];\n\n  return cards.slice(store.offset, store.offset + store.count);\n};\n\nexport const getCardsByPage = page => {\n  const cards = getLS('cart');\n  if (!cards?.length) return [];\n  store.offset = (page - 1) * store.count;\n  return getActualCards();\n};\n\n// export const showCards = page => {\n//   const cards = getActualCards();\n//   const cardsPerPage = 3;\n//   const totalCards = cards.length;\n//   const totalPages = Math.ceil(totalCards / cardsPerPage);\n\n//   // Calculate the start and end indices for the current page\n//   const startIndex = (page - 1) * cardsPerPage;\n//   const endIndex = Math.min(startIndex + cardsPerPage, totalCards);\n\n//   const cardContainer = document.getElementById('card-container');\n//   cardContainer.innerHTML = ''; // Clear existing cards\n\n//   for (let i = startIndex; i < endIndex; i++) {\n//     // Create and append card elements (customize as needed)\n//     const cardElement = document.createElement('div');\n//     cardElement.textContent = cards[i].title; // Example: Display card title\n//     cardContainer.appendChild(cardElement);\n//   }\n\n//   // Create pagination buttons\n//   const paginationButtons = document.getElementById('pagination-buttons');\n//   paginationButtons.innerHTML = ''; // Clear existing buttons\n\n//   // \"<<\" Button (Go to first page)\n//   const firstButton = createPaginationButton('<<', 1);\n//   paginationButtons.appendChild(firstButton);\n\n//   // \"<\" Button (Go to previous page)\n//   if (page > 1) {\n//     const prevButton = createPaginationButton('<', page - 1);\n//     paginationButtons.appendChild(prevButton);\n//   }\n\n//   // Page Number Button\n//   const pageNumberButton = createPaginationButton(page.toString(), page);\n//   paginationButtons.appendChild(pageNumberButton);\n\n//   // \">\" Button (Go to next page)\n//   if (page < totalPages) {\n//     const nextButton = createPaginationButton('>', page + 1);\n//     paginationButtons.appendChild(nextButton);\n//   }\n\n//   // \">>\" Button (Go to last page)\n//   const lastButton = createPaginationButton('>>', totalPages);\n//   paginationButtons.appendChild(lastButton);\n// };\n\nfunction createPaginationButton(label, changePagination) {\n  const button = document.createElement('button');\n  button.classList.add('cart-pagination-btn');\n  button.textContent = label;\n  button.onclick = changePagination; // Attach click event\n  return button;\n}\n\nexport const renderPagination = (domElement, changePagination) => {\n  const cart = getLS('cart') || [];\n\n  const pages = Math.ceil(cart.length / store.count);\n  const currentPage = store.offset / store.count + 1;\n  if (pages === 1) return;\n  if (pages === 0) {\n    changePagination(0);\n    return;\n  }\n  const paginationDiv = document.createElement('div');\n  paginationDiv.classList.add('cart-pagination-btns');\n\n  const countPageBtn = 3;\n  const isStartDotsBtn = currentPage >= countPageBtn;\n\n  const isEndDotsBtn = currentPage !== pages && pages > countPageBtn;\n\n  // ======= render first arrow btns ======= //\n  const btn1 = createPaginationButton('<<', () => {\n    changePagination(1);\n  });\n\n  btn1.disabled = currentPage === 1;\n\n  if (!btn1.disabled) {\n    btn1.classList.add('cart-shrink');\n  }\n\n  paginationDiv.appendChild(btn1);\n\n  // ======= render first arrow btns ======= //\n  const btn2 = createPaginationButton('<', () => {\n    changePagination(currentPage - 1);\n  });\n\n  btn2.disabled = currentPage === 1;\n\n  if (!btn2.disabled) {\n    btn2.classList.add('cart-shrink');\n  }\n\n  paginationDiv.appendChild(btn2);\n\n  // ======= render dots btns ======= //\n\n  const dotsBtnPrev = createPaginationButton('...', () => {});\n\n  if (!isStartDotsBtn) {\n    dotsBtnPrev.setAttribute('style', 'display:none;');\n  }\n\n  paginationDiv.appendChild(dotsBtnPrev);\n\n  // ======= render page btn ======= //\n\n  for (let index = 1; index <= countPageBtn; index++) {\n    const newPage = isStartDotsBtn\n      ? index + currentPage - countPageBtn + Number(isEndDotsBtn)\n      : index;\n\n    const pageBtn = createPaginationButton(newPage, () => {\n      changePagination(newPage);\n    });\n\n    if (index === 1 && isStartDotsBtn) {\n      pageBtn.setAttribute('style', 'display:none;');\n    }\n\n    if (index === countPageBtn && isEndDotsBtn) {\n      pageBtn.setAttribute('style', 'display:none;');\n    }\n\n    if (currentPage === newPage) {\n      pageBtn.classList.add('pagination-btn-active');\n    }\n\n    paginationDiv.appendChild(pageBtn);\n  }\n\n  // ======= render dots btns ======= //\n\n  const dotsBtn = createPaginationButton('...', () => {});\n\n  if (!isEndDotsBtn) {\n    dotsBtn.setAttribute('style', 'display:none;');\n  }\n\n  paginationDiv.appendChild(dotsBtn);\n\n  // ======= render next arrow btns ======= //\n  const btn3 = createPaginationButton('>', () => {\n    changePagination(currentPage + 1);\n  });\n\n  btn3.disabled = pages === currentPage;\n\n  if (!btn3.disabled) {\n    btn3.classList.add('cart-shrink');\n  }\n\n  paginationDiv.appendChild(btn3);\n\n  // ======= render last arrow btns ======= //\n  const btn4 = createPaginationButton('>>', () => {\n    changePagination(pages);\n  });\n\n  btn4.disabled = pages === currentPage;\n\n  if (!btn4.disabled) {\n    btn4.classList.add('cart-shrink');\n  }\n\n  paginationDiv.appendChild(btn4);\n  domElement.appendChild(paginationDiv);\n};\n","import { getLS, setLS } from './workInLS';\nimport amazon from '../img/png/amazon.png';\nimport apple from '../img/png/apple-book.png';\nimport emptyCart from '../img/png/cart-background.png';\nimport { createCategoryMarkup } from './createMarkups';\nimport {\n  getActualCards,\n  getCardsByPage,\n  renderPagination,\n} from './cartPagination';\n\nexport const makeDeleteCardFromLSHandler = domElement => id => {\n  const cart = getLS('cart');\n  const newCart = cart.filter(book => book._id !== id);\n  setLS('cart', newCart.length > 0 ? newCart : null);\n  renderCartMarkupWithPagination(domElement, getActualCards(newCart));\n};\n\nconst createCardsMarkup = book => {\n  return `<li class=\"cart-item-glow cart-item\">\n          <img class=\"cart-image\" src=\"${book.book_image}\"/>\n          <div class=\"cart-book-section\">\n            <h3 class=\"cart-book-title\">${book.title}</h3>\n            <button class=\"cart-remove-book-btn\" onclick=\"window.deleteCardFromLSHandler('${book._id}')\">\n              <span class=\"cart-trash\">\n                <span></span>\n                <i></i>\n              </span>\n            </button>\n            <p class=\"cart-book-category\">${book.list_name}</p>\n            <p class=\"cart-book-description\">\n             ${book.description}\n            </p>\n\n            <p class=\"cart-book-autor\">${book.author}</p>\n            <div class=\"cart-book-links\">\n              <a href=${book.buy_links[0].url} class=\"cart-amazon cart-amazon-dark\">\n                <img src=${amazon} alt=${book.buy_links[0].name} />\n              </a>\n              <a\n                href=${book.buy_links[1].url}\n                class=\"cart-apple-books cart-apple-books-dark\"\n              >\n                <img src=${apple} alt=${book.buy_links[1].name} />\n              </a>\n            </div>\n          </div>\n        </li>`;\n};\n\nconst createEmptyCartMarkup = () => {\n  return `<li class=\"cart-background\">\n        <p class=\"cart-background-text\">\n          This page is empty, add some books and proceed to order.\n        </p>\n        <img class=\"cart-bg-img\" src=\"${emptyCart}\" />\n      </li>`;\n};\n\nconst makeChangePagination = domElement => page => {\n  const cart = getCardsByPage(page);\n  renderContent(domElement, cart);\n};\n\nconst renderCartMarkupWithPagination = (domElement, cart) => {\n  domElement.innerHTML = createCategoryMarkup(cart, createCardsMarkup);\n  renderPagination(domElement, makeChangePagination(domElement));\n};\n\nconst renderContent = (domElement, cart) => {\n  if (!cart?.length) {\n    domElement.innerHTML = createCategoryMarkup([''], createEmptyCartMarkup);\n    return;\n  }\n  renderCartMarkupWithPagination(domElement, cart);\n};\n\nexport const renderCart = domElement => {\n  const cart = getLS('cart');\n  renderContent(domElement, getActualCards(cart));\n};\n","import './js/enableDarkTheme';\nimport './js/autorization';\nimport './js/donation-list';\nimport {\n  createBookMarkup,\n  createCategoryMarkup,\n  renderContent,\n} from './js/createMarkups';\nimport { createAndOpenModalWindow } from './js/modal';\nimport { getCartData } from './js/cartDataHandler';\nimport { refs } from './js/refs';\nimport {\n  renderCart,\n  makeDeleteCardFromLSHandler,\n} from './js/shoppingListHandler';\nimport { setActivePage } from './js/showHideFn';\nimport { userIsLoggedIn } from './js/autorization';\nuserIsLoggedIn();\nsetActivePage('header-nav-link-shop');\n// const shoppingListData = getCartData();\n// const markup = createCategoryMarkup(shoppingListData, createBookMarkup);\n// renderContent(refs.shopListWrap, markup, createAndOpenModalWindow);\n\n// move function  from main.js to shopping-list.js\n\n// refs.shoppingListBtn.addEventListener('click', e => {\n// e.preventDefault();\n// e.stopPropagation();\n\nrefs.mainTitle.innerHTML = `Shopping <span>List</span>`;\nrenderCart(refs.shopListWrap);\nwindow.deleteCardFromLSHandler = makeDeleteCardFromLSHandler(refs.shopListWrap);\n// });\n"],"names":["prefixKey","getLS","key","lsValue","error","setLS","value","emptyCart","store","getActualCards","cards","getCardsByPage","page","createPaginationButton","label","changePagination","button","renderPagination","domElement","cart","pages","currentPage","paginationDiv","countPageBtn","isStartDotsBtn","isEndDotsBtn","btn1","btn2","dotsBtnPrev","index","newPage","pageBtn","dotsBtn","btn3","btn4","makeDeleteCardFromLSHandler","id","newCart","book","renderCartMarkupWithPagination","createCardsMarkup","amazon","apple","createEmptyCartMarkup","makeChangePagination","renderContent","createCategoryMarkup","renderCart","userIsLoggedIn","setActivePage","refs"],"mappings":"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"}