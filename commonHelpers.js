import{r,i as _,a as D,b as R,c as m,d as b,e as y,f as z,g as W,s as T,h as F,j as N,k as O}from"./assets/showHideFn-d64f52c4.js";import{a as I,b as H,i as J}from"./assets/vendor-4a53a031.js";I.defaults.baseURL="https://books-backend.p.goit.global/books";const u={list:"/category-list",topbooks:"/top-books",category:"/category?category=",id:"/{id}"};async function c(e,t=""){try{const o=e+t;return(await I.get(o)).data}catch(o){return console.error("Error fetching data:",o),null}}function w(e,t){const o=JSON.parse(localStorage.getItem("cart"))?JSON.parse(localStorage.getItem("cart")):[];if(e.target.textContent.toLowerCase().includes("add"))o.push(t),localStorage.setItem("cart",JSON.stringify(o));else{const a=o.findIndex(n=>n._id===t._id);o.splice(a,1),localStorage.setItem("cart",JSON.stringify(o))}}function S(e){const t=j();return t?t.some(o=>o._id===e._id):!1}function j(){return JSON.parse(localStorage.getItem("cart"))||[]}const p="Add to shopping list",g="Remove from the shopping list",B='Congratulations! You have added the book to the shopping list. To delete, press the button "Remove from the shopping list".',A="",U="No description has been added to this book";let k;async function P(e){const t=e.target.dataset.id,o=await c(t);return k=o,`<div class="modal-container">
        <button class="modal-button-close" type="button">
        <svg class="modal-icon-close" width="24" height="24">
        <use href=${_}#x-close></use></svg></button>
        <div class="modal-book-wrapper">
        <img
          class="modal-img"
          src="${o.book_image}"
          alt="${o.title}"
          width="287"
          height="408"/>
        <div class="modal-book-desc-wrapper">
        <h2 class="modal-book-title">${o.title}</h2>
        <h3 class="modal-book-author">${o.author}</h3>
        <p class="modal-book-desc">${o.description?o.description:U}</p>
        <div class="modal-buy-links-wrapper">
        <a
          class="modal-buy-link"
          href=${o.buy_links[0].url}
          target="_blank">
        <img
          class="modal-link-amazon-icon"
          src=${D}
          alt="Amazon product link"
          width="62"
          height="19"/></a>
        <a
          class="modal-buy-link"
          href=${o.buy_links[1].url}
          target="_blank">
        <img
          class="modal-link-apple-icon"
          src=${R}
          alt="Apple-book product link"
          width="33"
          height="32"/></a></div></div></div>
        <div class="button-toggle-wrapper">
        <button class="add-remove-button modal-button-glow-styles" type="button">${S(o)?g:p}</button>
        <span class="modal-text">${S(o)?B:A}</span>
        </div></div>`}async function v(e){if(e.target===e.currentTarget)return;const t=await P(e),o=H.create(t,{onClose:()=>window.removeEventListener("resize",d)});G(o),o.show(Y)}function Y(e){JSON.parse(localStorage.getItem("userInfo"))||e.element().querySelector(".button-toggle-wrapper").classList.add("hidden"),d(),window.addEventListener("resize",d);const t=e.element().querySelector(".modal-button-close"),o=e.element().querySelector(".add-remove-button");document.body.classList.add("scroll-ban"),document.addEventListener("keydown",a),t.addEventListener("click",n),o.addEventListener("click",E);function a(L){L.key==="Escape"&&e.close(s)}function n(){e.close(s)}function s(){document.removeEventListener("keydown",a),o.removeEventListener("click",E),t.removeEventListener("click",n),window.removeEventListener("resize",d),document.body.classList.remove("scroll-ban")}}function E(e){e.currentTarget.textContent===p?(w(e,k),e.currentTarget.textContent=g,e.currentTarget.nextElementSibling.textContent=B):e.currentTarget.textContent===g&&(w(e,k),e.currentTarget.textContent=p,e.currentTarget.nextElementSibling.textContent=A)}function G(e){const t={container:e.element().querySelector(".modal-container").classList,closeButton:e.element().querySelector(".modal-button-close").classList,closeIcon:e.element().querySelector(".modal-icon-close").classList,bookTitle:e.element().querySelector(".modal-book-title").classList,desc:e.element().querySelector(".modal-book-desc").classList,amazonIcon:e.element().querySelector(".modal-link-amazon-icon").classList,appleIcon:e.element().querySelector(".modal-link-apple-icon").classList,addRemoveButton:e.element().querySelector(".add-remove-button").classList,text:e.element().querySelector(".modal-text").classList};r.checkbox.checked?(t.container.add("modal-container-dark-theme"),t.closeIcon.add("modal-icon-close-dark-theme"),t.bookTitle.add("modal-text-dark-theme"),t.desc.add("modal-text-dark-theme"),t.amazonIcon.add("modal-icon-amazon-dark-theme"),t.appleIcon.add("modal-icon-apple-dark-theme"),t.addRemoveButton.add("modal-text-dark-theme"),t.addRemoveButton.add("modal-button-glow-styles-dark-theme"),t.text.add("modal-label-dark-theme")):(t.container.remove("modal-container-dark-theme"),t.closeIcon.remove("modal-icon-close-dark-theme"),t.bookTitle.remove("modal-text-dark-theme"),t.desc.remove("modal-text-dark-theme"),t.amazonIcon.remove("modal-icon-amazon-dark-theme"),t.appleIcon.remove("modal-icon-apple-dark-theme"),t.addRemoveButton.remove("modal-text-dark-theme"),t.addRemoveButton.remove("modal-button-glow-styles-dark-theme"),t.text.remove("modal-label-dark-theme"))}function d(){const e=document.querySelector(".basicLightbox"),t=document.querySelector(".modal-container");window.innerHeight<t.offsetHeight?e.classList.add("lightbox-scroll"):e.classList.remove("lightbox-scroll")}function K(e){return e.map(t=>{const o=t.list_name.split(" ");o[o.length-1]=`<span>${o[o.length-1]}</span>`;const a=`<h2 class="category-title">${o.join(" ")}</h2>`,n=b(t.books,y),s=z("see-more-button","See more",t.list_name);return a+n+s}).join("")}async function q(){const e=await c(u.topbooks),t=K(e);m(r.mainCatWrap,t,v)}Q();r.catList.addEventListener("click",X);async function Q(){const e=await c(u.list),t=V(e);m(r.catList,t)}function V(e){const t='<li class="sidebar-category-item"><p class="sidebar-category-text make-blue">All categories</p></li>',o=e.map(n=>`<li class="sidebar-category-item" data-category="${n.list_name}"><p class="sidebar-category-text" data-category="${n.list_name}">${n.list_name}</p></li>`).join("");return t+o}function x(e){e.target.nodeName==="LI"?(e.target.parentElement.querySelectorAll(".sidebar-category-text").forEach(o=>{o.classList.remove("make-blue")}),e.target.firstElementChild.classList.add("make-blue")):e.target.nodeName==="P"&&(e.target.parentElement.parentElement.querySelectorAll(".sidebar-category-text").forEach(o=>{o.classList.remove("make-blue")}),e.target.classList.add("make-blue"))}async function X(e){if(e.target===e.currentTarget)return;if(!e.target.dataset.category){r.mainTitle.innerHTML="Best Sellers <span>Books</span>",x(e),q();return}x(e),W(r.mainCatWrap);const t=e.target.dataset.category.split(" ");t[t.length-1]=`<span>${t[t.length-1]}</span>`,r.mainTitle.innerHTML=t.join(" ");const o=await c(u.category,e.target.dataset.category),a=b(o,y);m(r.mainCatWrap,a,v),document.querySelectorAll(".main-category-item").forEach(s=>T(s))}const i=document.querySelector(".button-up");function Z(){window.innerHeight/2<window.scrollY?(i.classList.add("button-up--show"),i.addEventListener("click",C)):(i.classList.remove("button-up--show"),i.removeEventListener("click",C))}function C(){window.scrollTo({top:0,behavior:"smooth"})}const ee=F(Z,100);window.addEventListener("scroll",ee);const h="mailing-list",M="input-last-value",l=document.querySelector(".footer-form");function te(e,t){let o;return function(...a){clearTimeout(o),o=setTimeout(()=>{e.apply(this,a)},t)}}const oe=te(function(){const e=l.elements.email.value;$(M,e)},500);l.addEventListener("input",oe);l.addEventListener("submit",e=>{if(e.preventDefault(),l.elements.email.value.trim()===""){J.show({message:"Введіть e-mail",messageColor:"#FFFFFF",backgroundColor:"#59A10D",position:"topRight"});return}const o=f(h)||[];o.push(l.elements.email.value),$(h,o),l.reset()});function f(e){const t=localStorage.getItem(e);if(t)try{return JSON.parse(t)}catch{return t}}function $(e,t){const o=JSON.stringify(t);localStorage.setItem(e,o)}function ae(){const e=f(M)||"";l.elements.email.value=e}ae();f(h);N();O("header-nav-link-home");q();r.mainCatWrap.addEventListener("click",ne);async function ne(e){if(!e.target.dataset.category)return;const t=e.target.dataset.category.split(" ");t[t.length-1]=`<span>${t[t.length-1]}</span>`,r.mainTitle.innerHTML=t.join(" ");const o=await c(u.category,e.target.dataset.category),a=b(o,y);m(r.mainCatWrap,a,v),document.querySelectorAll(".main-category-item").forEach(s=>T(s))}
//# sourceMappingURL=commonHelpers.js.map
