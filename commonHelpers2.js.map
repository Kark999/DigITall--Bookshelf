{"version":3,"file":"commonHelpers2.js","sources":["../src/js/workInLS.js","../src/img/png/cart-background.png","../src/js/cartPagination.js","../src/js/shoppingListHandler.js","../src/shopping-list.js"],"sourcesContent":["const prefixKey = ''; // Prefix is needed to make your keys unique in LS,  as another library may have the same key\n\nexport const getLS = key => {\n  try {\n    const lsValue = localStorage.getItem(\n      `${prefixKey ? `${prefixKey}_` : ''}${key}`\n    );\n    if (lsValue) {\n      return JSON.parse(lsValue);\n    }\n    throw new Error(`I do not find ${prefixKey ? `${prefixKey}_` : ''}${key}`);\n  } catch (error) {\n    console.warn('[getLS]: ', error);\n    return null;\n  }\n};\n\n// const cart = getLS(\"cart\");\n\nexport const setLS = (key, value) => {\n  try {\n    value === null\n      ? localStorage.removeItem(`${prefixKey ? `${prefixKey}_` : ''}${key}`)\n      : localStorage.setItem(\n          `${prefixKey ? `${prefixKey}_` : ''}${key}`,\n          JSON.stringify(value)\n        );\n  } catch (error) {\n    console.warn('[setLS]: ', error);\n    return null;\n  }\n};\n\n// ===== end work in localeStorage ===== //\n","export default \"__VITE_ASSET__8169f96b__\"","import { getLS } from './workInLS';\n\nconst store = {\n  offset: 0,\n  count: 3,\n};\n\nexport const getActualCards = () => {\n  const cards = getLS('cart') || [];\n  if (!cards?.length) return [];\n\n  return cards.slice(store.offset, store.offset + store.count);\n};\n\nexport const getCardsByPage = page => {\n  const cards = getLS('cart');\n  if (!cards?.length) return [];\n  store.offset = (page - 1) * store.count;\n  return getActualCards();\n};\n\nfunction createPaginationButton(label, changePagination) {\n  const button = document.createElement('button');\n  button.classList.add('cart-pagination-btn');\n  button.textContent = label;\n  button.onclick = changePagination; // Attach click event\n  return button;\n}\n\nexport const renderPagination = (domElement, changePagination) => {\n  const cart = getLS('cart') || [];\n\n  const pages = Math.ceil(cart.length / store.count);\n  const currentPage = store.offset / store.count + 1;\n  if (pages === 1) return;\n  if (pages === 0) {\n    changePagination(0);\n    return;\n  }\n  const paginationDiv = document.createElement('div');\n  paginationDiv.classList.add('cart-pagination-btns');\n\n  const countPageBtn = 3;\n  const isStartDotsBtn = currentPage >= countPageBtn;\n\n  const isEndDotsBtn = currentPage !== pages && pages > countPageBtn;\n\n  // ======= render first arrow btns ======= //\n  const btn1 = createPaginationButton('<<', () => {\n    changePagination(1);\n  });\n\n  btn1.disabled = currentPage === 1;\n\n  if (!btn1.disabled) {\n    btn1.classList.add('cart-shrink');\n    btn1.classList.add('cart-last-arrow-btn');\n  }\n\n  paginationDiv.appendChild(btn1);\n\n  // ======= render first arrow btns ======= //\n  const btn2 = createPaginationButton('<', () => {\n    changePagination(currentPage - 1);\n  });\n\n  btn2.disabled = currentPage === 1;\n\n  if (!btn2.disabled) {\n    btn2.classList.add('cart-shrink');\n    btn2.classList.add('cart-last-arrow-btn');\n  }\n\n  paginationDiv.appendChild(btn2);\n\n  // ======= render dots btns ======= //\n\n  const dotsBtnPrev = createPaginationButton('...', () => {});\n\n  if (!isStartDotsBtn) {\n    dotsBtnPrev.setAttribute('style', 'display:none;');\n  }\n\n  paginationDiv.appendChild(dotsBtnPrev);\n\n  // ======= render page btn ======= //\n\n  for (let index = 1; index <= countPageBtn; index++) {\n    const newPage = isStartDotsBtn\n      ? index + currentPage - countPageBtn + Number(isEndDotsBtn)\n      : index;\n\n    const pageBtn = createPaginationButton(newPage, () => {\n      changePagination(newPage);\n    });\n\n    if (index === 1 && isStartDotsBtn) {\n      pageBtn.setAttribute('style', 'display:none;');\n    }\n\n    if (index === countPageBtn && isEndDotsBtn) {\n      pageBtn.setAttribute('style', 'display:none;');\n    }\n\n    if (currentPage === newPage) {\n      pageBtn.classList.add('cart-pagination-btn-active');\n    } else if (currentPage !== newPage && currentPage > newPage) {\n      pageBtn.classList.add('cart-last-arrow-btn');\n      dotsBtnPrev.classList.add('cart-last-arrow-btn');\n    }\n\n    paginationDiv.appendChild(pageBtn);\n  }\n\n  // ======= render dots btns ======= //\n\n  const dotsBtn = createPaginationButton('...', () => {});\n\n  if (!isEndDotsBtn) {\n    dotsBtn.setAttribute('style', 'display:none;');\n  }\n\n  paginationDiv.appendChild(dotsBtn);\n\n  // ======= render next arrow btns ======= //\n  const btn3 = createPaginationButton('>', () => {\n    changePagination(currentPage + 1);\n  });\n\n  btn3.disabled = pages === currentPage;\n\n  if (!btn3.disabled) {\n    btn3.classList.add('cart-shrink');\n    btn3.classList.add('cart-next-arrow-btn');\n  }\n\n  paginationDiv.appendChild(btn3);\n\n  // ======= render last arrow btns ======= //\n  const btn4 = createPaginationButton('>>', () => {\n    changePagination(pages);\n  });\n\n  btn4.disabled = pages === currentPage;\n\n  if (!btn4.disabled) {\n    btn4.classList.add('cart-shrink');\n    btn4.classList.add('cart-next-arrow-btn');\n  }\n\n  paginationDiv.appendChild(btn4);\n  domElement.appendChild(paginationDiv);\n};\n","import { getLS, setLS } from './workInLS';\nimport amazon from '../img/png/amazon.png';\nimport apple from '../img/png/apple-book.png';\nimport emptyCart from '../img/png/cart-background.png';\nimport { createCategoryMarkup } from './createMarkups';\nimport {\n  getActualCards,\n  getCardsByPage,\n  renderPagination,\n} from './cartPagination';\n\nexport const makeDeleteCardFromLSHandler = domElement => id => {\n  const cart = getLS('cart');\n  const newCart = cart.filter(book => book._id !== id);\n  setLS('cart', newCart.length > 0 ? newCart : null);\n  renderCartMarkupWithPagination(domElement, getActualCards(newCart));\n};\n\nconst createCardsMarkup = book => {\n  return `<li class=\"cart-item-glow cart-item\">\n          <img class=\"cart-image\" src=\"${book.book_image}\"/>\n          <div class=\"cart-book-section\">\n            <h3 class=\"cart-book-title\">${book.title}</h3>\n            <button class=\"cart-remove-book-btn\" onclick=\"window.deleteCardFromLSHandler('${\n              book._id\n            }')\">\n              <span class=\"cart-trash\">\n                <span></span>\n                <i></i>\n              </span>\n            </button>\n            <p class=\"cart-book-category\">${book.list_name}</p>\n            <p class=\"cart-book-description\">\n             ${\n               book.description\n                 ? book.description\n                 : 'No description has been added to this book'\n             }\n            </p>\n            <div class=\"cart-info-wrapper\">\n            <p class=\"cart-book-autor\">${book.author}</p>\n            <div class=\"cart-book-links\">\n              <a href=${\n                book.buy_links[0].url\n              } class=\"cart-amazon cart-amazon-dark\">\n                <img src=${amazon} alt=${book.buy_links[0].name} />\n              </a>\n              <a\n                href=${book.buy_links[1].url}\n                class=\"cart-apple-books cart-apple-books-dark\"\n              >\n                <img src=${apple} alt=${book.buy_links[1].name} />\n              </a>\n            </div>\n            </div>\n          </div>\n        </li>`;\n};\n\nconst createEmptyCartMarkup = () => {\n  return `<li class=\"cart-background\">\n        <p class=\"cart-background-text\">\n          This page is empty, add some books and proceed to order.\n        </p>\n        <img class=\"cart-bg-img\" src=\"${emptyCart}\" />\n      </li>`;\n};\n\nconst makeChangePagination = domElement => page => {\n  const cart = getCardsByPage(page);\n  renderContent(domElement, cart);\n};\n\nconst renderCartMarkupWithPagination = (domElement, cart) => {\n  domElement.innerHTML = createCategoryMarkup(cart, createCardsMarkup);\n  renderPagination(domElement, makeChangePagination(domElement));\n};\n\nconst renderContent = (domElement, cart) => {\n  if (!cart?.length) {\n    domElement.innerHTML = createCategoryMarkup([''], createEmptyCartMarkup);\n    return;\n  }\n  renderCartMarkupWithPagination(domElement, cart);\n};\n\nexport const renderCart = domElement => {\n  const cart = getLS('cart');\n  renderContent(domElement, getActualCards(cart));\n};\n","import './js/enableDarkTheme';\nimport './js/autorization';\nimport './js/donation-list';\n// import {\n//   createBookMarkup,\n//   createCategoryMarkup,\n//   renderContent,\n// } from './js/createMarkups';\n// import { createAndOpenModalWindow } from './js/modal';\n// import { getCartData } from './js/cartDataHandler';\nimport { refs } from './js/refs';\nimport {\n  renderCart,\n  makeDeleteCardFromLSHandler,\n} from './js/shoppingListHandler';\nimport { setActivePage } from './js/showHideFn';\nimport { isUserLoggedIn } from './js/autorization';\nisUserLoggedIn();\nsetActivePage('header-nav-link-shop');\n\nconst cartRefs = {\n  mainContainer: document.querySelector('.main-container'),\n  mainTitle: document.querySelector('.main-title'),\n  cartItem: document.querySelector('.cart-item'),\n  cartBookTitle: document.querySelector('.cart-book-title'),\n  cartBookDescription: document.querySelector('.cart-book-description'),\n  cartAmazon: document.querySelector('.cart-amazon'),\n  cartAppleBooks: document.querySelector('.cart-apple-books'),\n};\n\n// const mainContainer = document.querySelector('.main-container');\n\nrefs.mainTitle.innerHTML = `Shopping <span>List</span>`;\nrenderCart(refs.shopListWrap);\nwindow.deleteCardFromLSHandler = makeDeleteCardFromLSHandler(refs.shopListWrap);\n\nconst checkBox = document.querySelector('#themeToggle');\n\ncheckBox.addEventListener('click', () => {\n  const isCheckBoxActive = checkBox.checked;\n  if (isCheckBoxActive) {\n    cartRefs.mainContainer.classList.add('dark-theme');\n  } else {\n    cartRefs.mainContainer.classList.remove('dark-theme');\n  }\n});\n"],"names":["prefixKey","getLS","key","lsValue","error","setLS","value","emptyCart","store","getActualCards","cards","getCardsByPage","page","createPaginationButton","label","changePagination","button","renderPagination","domElement","cart","pages","currentPage","paginationDiv","countPageBtn","isStartDotsBtn","isEndDotsBtn","btn1","btn2","dotsBtnPrev","index","newPage","pageBtn","dotsBtn","btn3","btn4","makeDeleteCardFromLSHandler","id","newCart","book","renderCartMarkupWithPagination","createCardsMarkup","amazon","apple","createEmptyCartMarkup","makeChangePagination","renderContent","createCategoryMarkup","renderCart","isUserLoggedIn","setActivePage","cartRefs","refs","checkBox"],"mappings":"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"}